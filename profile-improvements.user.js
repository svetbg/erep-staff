// ==UserScript==
// @name         Profile Improvements
// @include      *www.erevollution.com/*/profile/*
// @version      0.0.5
// @description  Profile Improvements
// @author       Anonymous
// @grant        none
// ==/UserScript==

function style(a){$("head").append("<style>"+a+"</style>")}!function(){"use strict";style("select {display:table-cell;}"),style(".hits {color: #595959;}");var a=navigator.language||navigator.userLanguage||"en-US",b=["Recruit","Junior Cadet","Cadet","Cadet Senior","Cadet 1st Class","Soldier","Private Basic","Private 2nd Class","Private","Private 1st Class","Specialist","Gunnery Specialist","Technical Specialist","Specialist 1st Class","Ranger","Lance Corporal","Corporal","Fireteam Leader","Sergeant 3rd Class","Sergeant 2nd Class","Sergeant","Sergeant 1st Class","Staff Sergeant","Gunnery Sergeant","Master Sergeant","First Sergeant","Command Sergeant","Master Gunnery Sergeant","Sergeant Major","Company Sergeant","Warrant Officer Candidate","Warrant Officer","Chief Warrant Officer","Chief Warrant Officer 1st Class","Master Warrant Officer","Quartermaster","Officer Cadet Junior","Officer Cadet Senior","Ensign","Second Lieutenant","First Lieutenant","Lieutenant Captain","Lieutenant","Lieutenant Colonel","Captain Lieutenant","Captain","Captain*","Captain**","Captain***","Colonel","Brigadier","Field Marshal","Commander","High Commander","Supreme Commander","Major General","Lieutenant General","General-Field Marshal","General","SF First Lieutenant","SF Sublieutenant","SF Lieutenant","SF Lieutenant-Colonel","SF Lieutenant-Captain","SF Captain","TSF Captain*","SF Captain**","SF Captain***","SF Colonel","Warface"];$(document).ready(function(){function y(){m=Math.ceil((e+5*f)*(1+.05*h)*j*i*l),m-=m*k;var a=v-u;p=Math.ceil(a/m);var b=x-w;q=Math.ceil(b/m),z()}function z(){$("h4#oneHit").html(m.toLocaleString(a,{minimumFractionDigits:2})+" / hit"),$("strong#tp_in").html(" in "+p+" hits"),$("strong#ally_in").html(" in "+q+" hits")}function A(a){var b=a.html().split("/");return u=parseFloat(b[0].split(",").join("")),v=parseFloat(b[1].split(",").join("")),[u,v]}var c=$("span.vs164-2"),d=$("div.vs163-1"),e=parseFloat(c.html().replace(",","")),f=parseInt($("span.vs164-13").html()),g=$("span.vs164-6").html(),h=b.indexOf(g)+1,i=$("input#ne:checked").length?1.1:1,j=parseFloat($("select#weapon").val())||1,k=parseFloat($("select#dsystem").val())||0,l=parseFloat($("select#booster").val())||1,m=0,n=$("small.vs165-5 strong").eq(0),o=$("small.vs165-5 strong").eq(1),p=0,q=0,r=0;n.after('<strong id="tp_in" class="hits"></strong>'),o.after('<strong id="ally_in" class="hits"></strong>');var s=A(n),t=A(o),u=s[0],v=s[1],w=t[0],x=t[1];y(),$("div.vs164-11").after('<h3 style="margin-top: 15px;clear: both;"><span>Calculator</span></h3><br /><div class="vs165"><strong class="vs165-1">NE: <input type="checkbox" id="ne" value="1.1"/></strong><strong class="vs165-1"><select required="required" class="form-control" id="weapon"><option value="1.0">No weapon</option><option value="1.2">Q1 Weapon</option><option value="1.4">Q2 Weapon</option><option value="1.6">Q3 Weapon</option><option value="1.8">Q4 Weapon</option><option value="2.0">Q5 Weapon</option><option value="1.6">Q1 Tank</option><option value="1.8">Q2 Tank</option><option value="2.2">Q3 Tank</option><option value="2.6">Q4 Tank</option><option value="3.0">Q5 Tank</option><option value="2.4">Q1 Helicopter</option><option value="2.6">Q2 Helicopter</option><option value="3.0">Q3 Helicopter</option><option value="3.5">Q4 Helicopter</option><option value="4.0">Q5 Helicopter</option><option value="5.0">RPG</option></select></strong><strong class="vs165-1"><select required="required" class="form-control" id="dsystem"><option value="0.0">No Defense</option><option value="0.05">Q1 Defense</option><option value="0.10">Q2 Defense</option><option value="0.15">Q3 Defense</option><option value="0.20">Q4 Defense</option><option value="0.25">Q5 Defense</option></select></strong><strong class="vs165-1"><select required="required" class="form-control" id="booster"><option value="1.0">No booster</option><option value="1.1">Q1 Booster</option><option value="1.3">Q3 Booster</option><option value="1.5">Q5 Booster</option></select></strong><h4 id="oneHit" class="vs165-2 hits">'+m.toLocaleString(a,{minimumFractionDigits:2})+" / hit</h4></div>"),$("input#ne").click(function(){i=this.checked?1.1:1,y()}),$("select#weapon").change(function(){j=parseFloat($(this).val()),y()}),$("select#dsystem").change(function(){k=parseFloat($(this).val()),y()}),$("select#booster").change(function(){l=parseFloat($(this).val()),y()}),d.each(function(){var a=parseInt($(this).html());r+=a}),d.eq(0).parent().prev().prev().html("<span>"+d.eq(0).parent().prev().prev().html()+" ("+r+")</span>")})}();
